<!DOCTYPE html>
<html lang="en_us.utf8">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
AngularJS Normal Links with HTML5 Mode - Panjie SW's Blog  </title>

  <meta name="description" content="How to do full page reload with AngularJS HTML5 Mode.
">
  <meta name="robots" content="index,follow">

  <meta name="keywords" content="javascript, coffeescript, angularjs, html5, reminder">
  <meta property="og:title" content="AngularJS Normal Links with HTML5 Mode">
  <meta property="og:description" content="How to do full page reload with AngularJS HTML5 Mode.">
  <meta property="og:url" content="http://blog.panjiesw.com/posts/2013/09/angularjs-normal-links-with-html5mode/">
  <meta property="og:image" content="http://blog.panjiesw.com//static/images/angularjs.png">
  <meta property="og:site_name" content="Panjie SW's Blog">
  <meta property="og:type" content="website">


  <meta name="msapplication-TileColor" content="#FFFFFF">
  <meta name="msapplication-TileImage" content="favicon-144.png">

  <link rel="apple-touch-icon-precomposed" href="favicon-152.png">

  <link rel="author" href="https://plus.google.com/+PanjieSetiawanWicaksono">

  <!-- Fonts -->
  <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro%3A400%2C400italic%2C700" rel="stylesheet">
  <link href="http://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet">

  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.2.0/css/bootstrap.min.css" type="text/css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.2.0/css/bootstrap-theme.min.css" type="text/css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css" type="text/css">

  <link rel="stylesheet" href="http://blog.panjiesw.com/theme/css/bootstrap-social.css" type="text/css">
  <link rel="stylesheet" href="http://blog.panjiesw.com/theme/css/pygments-monokai.css" type="text/css">
  <link rel="stylesheet" href="http://blog.panjiesw.com/theme/css/main.css" type="text/css">

  <link href="http://blog.panjiesw.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Panjie SW's Blog Full Atom Feed" />

  <SCRIPT TYPE="text/javascript">
    function popup(mylink, windowname)
  {
  if (! window.focus)return true;
  var href;
  if (typeof(mylink) == 'string')
    href=mylink;
  else
    href=mylink.href;
  window.open(href, windowname, 'width=600,height=400,scrollbars=yes');
  return false;
  }
  </SCRIPT>

  <!-- Loading Bar -->
  <script src="http://blog.panjiesw.com/theme/js/pace.min.js" type="text/javascript"></script>
  <script type="text/javascript" async src="//platform.twitter.com/widgets.js"></script>

  <!-- HTML5 shiv for IE8 support -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <![endif]-->

<meta name="keywords" content="javascript, coffeescript, angularjs, html5, reminder">

</head>
<body>

<div id="secondary" class="col-sm-3 sidebar" style="display: none;">
  <aside>

    <div class="about">
      <h4>randomness happens</h4>
      <p>Hi, I'm Panjie SW. Here you are reading some of my random things I do in front of my old laptop.</p>
    </div>

    <div class="tags">
      <h4>Tags</h4>
      <ul>
          <li><a href="http://blog.panjiesw.com/tag/first.html" class="label label-primary">first</a></li>
          <li><a href="http://blog.panjiesw.com/tag/pelican.html" class="label label-warning">pelican</a></li>
          <li><a href="http://blog.panjiesw.com/tag/coffeescript.html" class="label label-danger">coffeescript</a></li>
          <li><a href="http://blog.panjiesw.com/tag/her.html" class="label label-primary">her</a></li>
          <li><a href="http://blog.panjiesw.com/tag/helloworld.html" class="label label-primary">helloworld</a></li>
          <li><a href="http://blog.panjiesw.com/tag/randomness.html" class="label label-primary">randomness</a></li>
          <li><a href="http://blog.panjiesw.com/tag/javascript.html" class="label label-danger">javascript</a></li>
          <li><a href="http://blog.panjiesw.com/tag/late-night.html" class="label label-primary">late-night</a></li>
          <li><a href="http://blog.panjiesw.com/tag/reminder.html" class="label label-primary">reminder</a></li>
          <li><a href="http://blog.panjiesw.com/tag/html5.html" class="label label-primary">html5</a></li>
          <li><a href="http://blog.panjiesw.com/tag/python.html" class="label label-warning">python</a></li>
          <li><a href="http://blog.panjiesw.com/tag/person.html" class="label label-primary">person</a></li>
          <li><a href="http://blog.panjiesw.com/tag/angularjs.html" class="label label-danger">angularjs</a></li>
      </ul>
    </div>

    <div class="categories">
      <h4>Categories</h4>
      <ul>
          <li><a href="http://blog.panjiesw.com/category/randomness.html" class="label label-primary">Randomness</a></li>
          <li><a href="http://blog.panjiesw.com/category/codes.html" class="label label-primary">Codes</a></li>
      </ul>
    </div>

    <div class="socialmedia">
      <h4>Share</h4>
      <div class="socials-sidebar">
        <a class="btn btn-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.panjiesw.com" onClick="return popup(this, 'facebook');" title="Facebook">
          <i class="fa fa-facebook"></i>
        </a>
        <a class="btn btn-twitter" href="https://twitter.com/intent/tweet?url=http%3A%2F%2Fblog.panjiesw.com&via=panjiesw&text=Panjie+SW%27s+Blog+-+randomness+happens" title="Twitter">
          <i class="fa fa-twitter"></i>
        </a>
        <a class="btn btn-google-plus" href="https://plus.google.com/share?url=http://blog.panjiesw.com" onClick="return popup(this, 'google-plus');" title="Google+">
          <i class="fa fa-google-plus"></i>
        </a>
        <a class="btn btn-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http://blog.panjiesw.com&title=Panjie%20SW's%20Blog&summary=randomness%20happen&source=http://blog.panjiesw.com" onClick="return popup(this, 'linkedin');" title="LinkedIn">
          <i class="fa fa-linkedin"></i>
        </a>
      </div>
    </div>

  </aside>
</div>
  <div id="primary" class="col-sm-12">
    <div class="content">

      <header class="header">
        <hgroup class="pull-left">
          <h1 class="site-title">
            <a rel="home" title="Panjie SW's Blog" href="/">
              <i class="fa fa-lemon-o"></i> Panjie SW's Blog
            </a>
          </h1>
        </hgroup>
        <div id="togglesidebar" class="btn btn-primary pull-right">
          <i class="fa fa-bars"></i>
        </div>
      </header>

  <img class="img-responsive img-bg" src="http://blog.panjiesw.com//static/images/angularjs.png" alt="AngularJS Normal Links with HTML5 Mode">
  <section class="post">
    <header class="entry-header">
      <img class="entry-avatar" src="http://blog.panjiesw.com/static/images/pict.png" alt="Panjie SW" height="52" width="52">
      <h2 class="entry-title"><a href="http://blog.panjiesw.com/posts/2013/09/angularjs-normal-links-with-html5mode/">AngularJS Normal Links with HTML5 Mode</a></h2>
      <p class="entry-meta">
      Posted on <a class="entry-date" href="http://blog.panjiesw.com/archives.html">September 26, 2013</a> | By <a class="entry-author" href="http://blog.panjiesw.com/author/panjie-setiawan-wicaksono.html">Panjie Setiawan Wicaksono</a> | Tags <a href="http://blog.panjiesw.com/tag/javascript.html" class="label label-danger">javascript</a>&nbsp;<a href="http://blog.panjiesw.com/tag/coffeescript.html" class="label label-danger">coffeescript</a>&nbsp;<a href="http://blog.panjiesw.com/tag/angularjs.html" class="label label-danger">angularjs</a>&nbsp;<a href="http://blog.panjiesw.com/tag/html5.html" class="label label-primary">html5</a>&nbsp;<a href="http://blog.panjiesw.com/tag/reminder.html" class="label label-primary">reminder</a>&nbsp;      </p>
    </header>
    <div class="entry-description">
      <p>Yeah! At last, some code in this boring blog! :p</p>
<p>Since the first time i played with <a href="http://angularjs.org">AngularJS</a> i have been enjoying the experience of developing a rich web application. I won't describe what it is or compare it with other client side javascript frameworks out there here right now, maybe some other time. Instead, also as a kind of note for myself, i will only write here a portion of one of its feature, HTML5 Mode in $location service.</p>
<p>HTML5 Mode, a configuration mode of <a href="http://docs.angularjs.org/api/ng.$location">$location service</a> in angularjs, uses HTML5 History API which one of its usage is to enrich client side interaction in a web application. When the $location service configured with this mode, browser will not do a full page reload when its URL is changed, without the need of hashbang <code>#!</code> in part of URL. But what if, in one time, you need a full page reload to react on browser's URL change? Such as signing a user out, which usually is handled by server side of your app.</p>
<p>For the sake of completeness(?), here is how i usually do to setup the $locationProvider to use html5 mode. Yes, i use coffeescript, it's easier to write and read, also provide a little similiar syntax as Python, which also i love.</p>
<div class="highlight"><pre><span class="c1"># in a module which defines routes</span>
<span class="nv">module.exports = </span><span class="p">[</span>
  <span class="s">&#39;$routeProvider&#39;</span>
  <span class="s">&#39;$locationProvider&#39;</span>
  <span class="nf">($routeProvider, $locationProvider, config) -&gt;</span>

    <span class="nx">$routeProvider</span>
      <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s">&#39;/a-route&#39;</span><span class="p">,</span>
        <span class="nv">templateUrl: </span><span class="s">&#39;/some/directory/partial.html&#39;</span>
        <span class="nv">controller: </span><span class="s">&#39;SomeController&#39;</span>
      <span class="p">)</span>
      <span class="c1"># ...and many other routes</span>

      <span class="c1"># Catch all</span>
      <span class="p">.</span><span class="nx">otherwise</span><span class="p">({</span><span class="nv">redirectTo: </span><span class="s">&#39;/catch-all&#39;</span><span class="p">})</span>

    <span class="c1"># Use html5 mode.</span>
    <span class="nx">$locationProvider</span><span class="p">.</span><span class="nx">html5Mode</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
<span class="p">]</span>
</pre></div>


<p>With above config, whenever user hit an anchor with link in your angularjs bootstrapped app, the browser will not do a full page reload. Instead the app will catch the URL and send it to your route handler client side so you can interact your app further.</p>
<p>A problem arise when using such configuration, as one or more link in your app need to be handled by your server side application, and thus the browser need to do a full page reload for it to bypass the angularjs app. Confused yet? Yeah, me too :p . But bear with still-a-newb-in-writing-me and think of one example like the one mentioned above.</p>
<p>Yup, usually signing a user out of your application involves direct interaction with your server side application, maybe to remove the session, token, any other authentication related stuff. How can we do that while the client side application is configured with html5mode like above? Here are what i found from stumbling in SO and do a further reading in AngularJS docs:</p>
<p>Taken from <a href="http://docs.angularjs.org/guide/$location#html-link-rewriting">AngularJS docs</a> :</p>
<blockquote>
<p>When you use HTML5 history API mode, you will need different links in different browsers, but all you have to do is specify regular URL links, such as: <code>&lt;a href="/some?foo=bar"&gt;link&lt;/a&gt;</code></p>
<p>When a user clicks on this link,</p>
<ul>
<li>In a legacy browser, the URL changes to /index.html#!/some?foo=bar</li>
<li>In a modern browser, the URL changes to /some?foo=bar</li>
</ul>
<p>In cases like the following, links are not rewritten; instead, the browser will perform a full page reload to the original link.</p>
<ul>
<li>Links that contain target element<br />
   Example: <code>&lt;a href="/ext/link?a=b" target="_self"&gt;link&lt;/a&gt;</code>  </li>
<li>Absolute links that go to a different domain<br />
   Example: <code>&lt;a href="http://angularjs.org/"&gt;link&lt;/a&gt;</code>  </li>
<li>Links starting with '/' that lead to a different base path when base is defined<br />
   Example: <code>&lt;a href="/not-my-base/link"&gt;link&lt;/a&gt;</code>  </li>
</ul>
</blockquote>
<p>In our case above, just put a <code>target="_self"</code> attribute to the anchor and the browser will do a full page reload so they hit the server side application directly.  </p>
<p>There we go, all good and set. Now back to the code :)</p>
    </div>
  </section>

  <div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_identifier = "angularjs-normal-links-with-html5mode";
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://panjieblog.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
  </div>

      <footer class="footer">
        <p>&copy; Panjie SW. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>.</p>
        <div class="socials-footer">
          <a class="btn btn-twitter" href="https://twitter.com/panjiesw" title="Twitter">
            <i class="fa fa-twitter"></i>
          </a>
          <a class="btn btn-linkedin" href="http://id.linkedin.com/pub/panjie-setiawan-wicaksono/43/868/229" title="LinkedIn">
            <i class="fa fa-linkedin"></i>
          </a>
          <a class="btn btn-google-plus" href="https://plus.google.com/+PanjieSetiawanWicaksono" title="Google+">
            <i class="fa fa-google-plus"></i>
          </a>
          <a class="btn btn-github" href="https://github.com/panjiesw" title="GitHub">
            <i class="fa fa-github"></i>
          </a>
        </div>
      </footer>

    </div>
  </div>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" type="text/javascript"></script>
  <script src="http://blog.panjiesw.com/theme/js/custom.js" type="text/javascript"></script>

</body>
</html>
